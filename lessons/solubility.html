<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>溶解度と濃度 - 中1理科</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-purple-600 dark:bg-purple-800 text-white shadow-lg">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div>
                        <button onclick="history.back()" class="mr-4 p-2 hover:bg-purple-700 rounded">←</button>
                        <h1 class="inline text-xl md:text-2xl font-bold">溶解度と濃度</h1>
                    </div>
                    <button id="darkModeToggle" class="p-2 rounded-lg bg-purple-700 hover:bg-purple-500 transition-colors">
                        <span class="text-lg">🌙</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
            <div class="container mx-auto px-4">
                <div class="flex space-x-8">
                    <button class="tab-button active" data-tab="lesson">レッスン</button>
                    <button class="tab-button" data-tab="simulation">シミュレーション</button>
                    <button class="tab-button" data-tab="concentration">濃度計算</button>
                    <button class="tab-button" data-tab="quiz">クイズ</button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <!-- Lesson Tab -->
            <div id="lesson" class="tab-content active">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200">溶解度と濃度の基礎</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-3 text-purple-600 dark:text-purple-400">溶解度とは</h3>
                            <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                <li><strong>溶解度:</strong> 一定量の水に溶ける溶質の最大量</li>
                                <li><strong>飽和:</strong> それ以上溶けない状態</li>
                                <li><strong>析出:</strong> 溶けきれない溶質が結晶として出てくること</li>
                                <li><strong>再結晶:</strong> 溶解度の差を利用した精製方法</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-3 text-blue-600 dark:text-blue-400">濃度の表し方</h3>
                            <div class="space-y-3">
                                <div class="border dark:border-gray-600 p-3 rounded">
                                    <div class="font-medium">質量パーセント濃度</div>
                                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                        濃度(%) = (溶質の質量 ÷ 溶液の質量) × 100
                                    </div>
                                </div>
                                <div class="border dark:border-gray-600 p-3 rounded">
                                    <div class="font-medium">溶液の質量</div>
                                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                        溶液の質量 = 溶質の質量 + 溶媒の質量
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-3 text-green-600 dark:text-green-400">温度と溶解度</h3>
                            <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                <li>• 一般的に温度が高いほど溶解度は大きくなる</li>
                                <li>• 物質によって溶解度の温度依存性は異なる</li>
                                <li>• 溶解度曲線でその関係を表す</li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">主な物質の溶解度</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b dark:border-gray-600">
                                        <th class="text-left py-2">物質</th>
                                        <th class="text-left py-2">0℃</th>
                                        <th class="text-left py-2">20℃</th>
                                        <th class="text-left py-2">40℃</th>
                                        <th class="text-left py-2">60℃</th>
                                        <th class="text-left py-2">80℃</th>
                                        <th class="text-left py-2">100℃</th>
                                    </tr>
                                </thead>
                                <tbody class="text-gray-700 dark:text-gray-300">
                                    <tr class="border-b dark:border-gray-600">
                                        <td class="py-2 font-medium">塩化ナトリウム</td>
                                        <td>35.7</td>
                                        <td>36.0</td>
                                        <td>36.4</td>
                                        <td>37.1</td>
                                        <td>38.0</td>
                                        <td>39.2</td>
                                    </tr>
                                    <tr class="border-b dark:border-gray-600">
                                        <td class="py-2 font-medium">硝酸カリウム</td>
                                        <td>13.9</td>
                                        <td>31.6</td>
                                        <td>61.3</td>
                                        <td>105.8</td>
                                        <td>165.0</td>
                                        <td>245.0</td>
                                    </tr>
                                    <tr class="border-b dark:border-gray-600">
                                        <td class="py-2 font-medium">ミョウバン</td>
                                        <td>2.45</td>
                                        <td>11.4</td>
                                        <td>27.0</td>
                                        <td>51.0</td>
                                        <td>82.0</td>
                                        <td>120.0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Simulation Tab -->
            <div id="simulation" class="tab-content">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200">溶解度シミュレーション</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Controls -->
                    <div class="space-y-6">
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">実験条件</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
                                        物質を選択
                                    </label>
                                    <select id="substanceSelect" class="w-full p-2 border dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100">
                                        <option value="nacl">塩化ナトリウム (NaCl)</option>
                                        <option value="kno3">硝酸カリウム (KNO₃)</option>
                                        <option value="alum">ミョウバン</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
                                        温度: <span id="tempValue">60</span>℃
                                    </label>
                                    <input 
                                        type="range" 
                                        id="tempSlider" 
                                        min="0" 
                                        max="100" 
                                        value="60" 
                                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                                    >
                                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                                        <span>0℃</span>
                                        <span>100℃</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
                                        溶質の量: <span id="soluteValue">50</span>g (水100gに対して)
                                    </label>
                                    <input 
                                        type="range" 
                                        id="soluteSlider" 
                                        min="0" 
                                        max="300" 
                                        value="50" 
                                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                                    >
                                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                                        <span>0g</span>
                                        <span>300g</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">計算結果</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span>この温度での溶解度:</span>
                                    <span id="currentSolubility" class="font-medium">50.0g</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>溶解した溶質:</span>
                                    <span id="dissolvedAmount" class="font-medium text-blue-600">50.0g</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>析出した結晶:</span>
                                    <span id="precipitatedAmount" class="font-medium text-red-600">0.0g</span>
                                </div>
                                <div class="border-t dark:border-gray-600 pt-3">
                                    <div class="flex justify-between font-semibold">
                                        <span>飽和度:</span>
                                        <span id="saturationLevel" class="text-green-600">100%</span>
                                    </div>
                                    <div id="statusMessage" class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                        飽和状態です
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart -->
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">溶解度曲線</h3>
                        <div class="relative h-80">
                            <canvas id="solubilityChart"></canvas>
                        </div>
                        <div class="mt-4 text-sm text-gray-600 dark:text-gray-400">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                    <span>現在のポイント</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                    <span>溶解度曲線</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Concentration Tab -->
            <div id="concentration" class="tab-content">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200">濃度計算ドリル</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">計算練習</h3>
                        
                        <div id="concentrationProblem" class="space-y-4">
                            <!-- Problem will be generated here -->
                        </div>
                        
                        <div class="mt-6 flex space-x-4">
                            <button id="checkAnswer" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded transition-colors">
                                答えを確認
                            </button>
                            <button id="newProblem" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded transition-colors">
                                新しい問題
                            </button>
                        </div>
                        
                        <div id="answerResult" class="mt-4 p-4 rounded-lg hidden">
                            <!-- Result will be shown here -->
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">公式の確認</h3>
                        
                        <div class="space-y-4">
                            <div class="border dark:border-gray-600 p-4 rounded">
                                <h4 class="font-medium mb-2">質量パーセント濃度</h4>
                                <div class="text-center text-lg font-mono bg-gray-100 dark:bg-gray-700 p-3 rounded">
                                    濃度(%) = (溶質 ÷ 溶液) × 100
                                </div>
                            </div>
                            
                            <div class="border dark:border-gray-600 p-4 rounded">
                                <h4 class="font-medium mb-2">溶質の質量</h4>
                                <div class="text-center text-lg font-mono bg-gray-100 dark:bg-gray-700 p-3 rounded">
                                    溶質 = 溶液 × 濃度 ÷ 100
                                </div>
                            </div>
                            
                            <div class="border dark:border-gray-600 p-4 rounded">
                                <h4 class="font-medium mb-2">溶液の質量</h4>
                                <div class="text-center text-lg font-mono bg-gray-100 dark:bg-gray-700 p-3 rounded">
                                    溶液 = 溶質 × 100 ÷ 濃度
                                </div>
                            </div>
                        </div>

                        <div class="mt-6">
                            <h4 class="font-medium mb-3">成績記録</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>正解数:</span>
                                    <span id="correctCount" class="font-medium text-green-600">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>問題数:</span>
                                    <span id="totalCount" class="font-medium">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>正答率:</span>
                                    <span id="accuracyRate" class="font-medium text-blue-600">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Tab -->
            <div id="quiz" class="tab-content">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200">溶解度と濃度クイズ</h2>
                
                <div id="quizContainer" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <div id="quizQuestion" class="mb-6">
                        <!-- Quiz content will be loaded here -->
                    </div>
                    
                    <div class="flex justify-between">
                        <button id="prevQuestion" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded transition-colors disabled:opacity-50" disabled>
                            前の問題
                        </button>
                        <button id="nextQuestion" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded transition-colors">
                            次の問題
                        </button>
                    </div>
                    
                    <div id="quizResult" class="hidden mt-6 p-4 rounded-lg">
                        <!-- Quiz results will be displayed here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/main.js"></script>
    <script src="../js/solubility.js"></script>
</body>
</html>